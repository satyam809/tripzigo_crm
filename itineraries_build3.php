<?php $totalPax=stripslashes($result['adult'])+stripslashes($result['child']); ?>

<style>
.addeventbtn{display:none;}

.jss11192 { font-size: 14px; padding-top: 15px; padding-left: 15px;     font-weight: 700;}

.jss11193 {
    width: 100%;
    display: flex;
}

.jss11195 {
    padding: 5px 30px 20px 0;
    flex-wrap: wrap;
    margin-bottom: -1px;
    list-style-type: none;
}


.jss11234 {
    position: relative;
    margin-top: 2px;
} 
.jss11053, .jss11053, .jss11053 {
    color: #fff;
    border: 0;
    background: #343642;
} 
.jss11047 {
    color: #343642;
    width: 70px;
    border: 2px solid #343642;
    height: 70px;
    display: flex; 
    transition: background 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
    align-items: center;
    border-radius: 35px;
    flex-direction: column;
    justify-content: center;
}
.jss11235 {
    left: -22px;
    padding: 2px;
    position: absolute;
    min-width: 34px;
    min-height: 24px;
    background: #f4f4f5;
    border-radius: 5px;
}

.jss11237 {
    font-size: 26px;
    font-weight: 500;
    line-height: 29px;
    margin-left: 0;
    letter-spacing: 0; color:#fff;
}

.jss11238 {
    color: #fff;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    padding-bottom: 2px;
    text-transform: uppercase;
}

.jss11047 {
    color: #343642;
	}
	
.jss11236 {
    color: #343642;
    border: 2px solid #343642;
    display: block;
    font-size: 10px;
    text-align: center;
    background: #f4f4f5;
    font-weight: 500;
    line-height: 20px;
    border-radius: 3px; font-weight:700;
}

.jss11197 {
    display: flex;
    padding: 5px 0 15px;
}
<style>
.jss11241 {
    border: 2px solid transparent;
    background: transparent;
    border-bottom: 0;
}

.jss11243 {
    color: #525a68;
    width: 100px;
    display: block;
    margin-right: 0px;
    border: 0px;
    background-color: transparent; position:relative;
}

.jss11245 {
    border: 3px solid transparent;
    position: relative;
    background-color: #fff;
    box-shadow: 0 2px 7px 0 rgba(0, 0, 0, 0.1);
    font-size: 34px; margin:auto;border: solid 2px #7D8891;
}


.jss11245:hover { cursor:pointer;
    box-shadow: 0 2px 15px 0 rgb(0 0 0 / 32%); 
}
 .jss13080 {
    color: inherit;
    width: calc(100% + 20px);
    margin: 10px -10px 0;
    position: relative;
    font-size: 10px;
    text-align: center;
    font-weight: 500;
    line-height: 11px;
    font-family: Libre Franklin, sans-serif;
}





.jss14095.jss14093, .jss14095.jss14093:hover, .jss14095.jss14093:focus {
    background: #525a68;
} 
.jss14093.jss14092:hover, .jss14093.jss14092:focus {
    color: #fff;
    box-shadow: 0 0 0 3px #fff, 0 0 0 6px #525a68;
} 
.jss14089.jss14092:hover, .jss14089.jss14092:focus {
    color: #fff;
    box-shadow: 0 0 0 3px #fff, 0 0 0 6px #343642;
} 
.jss14095, .jss14095:hover, .jss14095:focus {
    color: #fff;
    border: 0;
    background: #343642;
}


 
.jss14462:hover .jss14465 {
    display: flex;
} 
.jss14466 {
    padding: 5px 30px 20px 0;
    flex-wrap: wrap;
    margin-bottom: -1px;
    list-style-type: none;
}

.jss14500 {
    width: 100%;
    display: flex;
}

.daylisting:hover .addeventbtn{display:block !important;}

.daylisting:hover .addeventbtn .jss11053:hover { 
    -moz-box-shadow: inset 0 0 10px #fff;
    -webkit-box-shadow: inset 0 0 10px #ffffff;
    box-shadow: inset 0 0 0px 2px #ffffff;
}

.selectservicemenu {
    left: 0px;
    top: 0px;
    position: absolute;
    z-index: 99;
    background-color: #fff;
    padding: 20px;
    width: 350px;
    box-shadow: 0px 0px 7px #00000038;
    border-radius: 10px; display:none;
}
.optionmenu {
    position: absolute;
    width: 100%;
    left: 0px;
    top: 0px;
    height: 100%;
}





.jss11195 .show>.dropdown-menu {
    visibility: visible;
    opacity: 1;
    margin-top: 0!important;
    padding: 20px;
    width: 300px;
    border-radius: 10px;
}

.jss11195 .dropdown-item {
    color: #0f1f3e;
    text-decoration: none;
     padding:10px; font-size:19px;
}

.jss11195 .dropdown-item:hover{background-color: #e8ecef;border-radius: 4px;}

.dropdown-menu.show {
    display: block;
    width: 270px;
    padding: 20px;
}
.stime{font-size:10px; text-align:center;}
.strrating {
    position: absolute;
    left: 0px;
    top: -7px;
    color: #FF9900;
    font-size: 12px;
    text-align: center;
    width: 100%;
}
.strrating .fa{background-color:#fff;border-radius: 100%;}
ul { 
    list-style: none;
}

.jss11241 .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default, .ui-button, html .ui-button.ui-state-disabled:hover, html .ui-button.ui-state-disabled:active { 
    float: left;
}
.jss11195{float:left;}
.jss11195{float:left;}
.ui-sortable{height: 120px; float: left;}

.ui-state-default{
    border: 0px solid #c5c5c5 !important; 
}
.jss11241 .ui-icon-arrowthick-2-n-s{position: absolute !important; z-index: 1; padding: 8px; border: 2px solid #FFF; cursor: pointer; background-color: #fff; border-radius: 100%;}

 

.jss11241 .ui-state-default {
    border: 1px solid #f5f5f5 !important;
    padding: 14px 10px;
    margin-right: 20px;
    min-height: 133px;
    border-radius: 5px;
}

.jss11241 .ui-state-default:hover { border: 1px solid #c5c5c5 !important;}
.jss11241 .ui-icon-arrowthick-2-n-s {
    background-position: -161px -48px !important;
}
.jss11241 .ui-state-default:active{background-color: #fff8cf; border: 1px solid #ffb661 !important;}
div{transition:all 1s ease;}
</style>

<div class="container-fluid">
<div class="main-content">
<div class="page-content">



<div class="row">

 
<div class="col-md-12 col-xl-12">
<h4 style="margin-bottom:30px;"><?php echo stripslashes($result['name']); ?><span style="color: #353535; font-size: 14px; margin-top: 2px; float: right;"><?php echo stripslashes($result['destinations']); ?> - Adult: <?php echo stripslashes($result['adult']); ?> | Child: <?php echo stripslashes($result['child']); ?></span></h4>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<?php
$n=1;
$begin = new DateTime( $result['startDate'] );
$end   = new DateTime( $result['endDate'] );

for($i = $begin; $i <= $end; $i->modify('+1 day')){
?> 
 <form class="custom-validation" action="frmaction.html" target="actoinfrm" novalidate="" id="actoinfrm<?php echo $n; ?>" method="post" enctype="multipart/form-data" style="padding-left:20px;">	
<div style="border-top: 1px solid #c0c7cd;" class="daylisting" id="sortid<?php echo $n; ?>">
<div class="jss11192">Day <?php echo $n; ?></div>
<div class="jss11193">

<div class="jss11195"><div class="jss11047 jss11234 jss11053"><div class="jss11235"><span class="jss11236"><?php echo date('D', strtotime($i->format("Y-m-d"))); ?></span></div><span class="jss11237"><?php echo $i->format("d"); ?></span><span class="jss11238"><?php echo $i->format("M"); ?></span></div></div>

<div class="jss11241 jss11197">
 <ul id="sortable<?php echo $n; ?>" style="margin-left: 0px; padding-left: 10px; margin-top: -11px;" > 
<?php   
if(date('Y-m-d',strtotime($result['dateAdded']))>'2021-09-29'){
$orderbylist='sr';
} else {
$orderbylist='time(checkIn)';
}


$rs=GetPageRecord('*','sys_packageBuilderEvent',' packageId="'.$result['id'].'" and packageDays="'.$n.'" order by '.$orderbylist.' asc');
while($eventData=mysqli_fetch_array($rs)){ 

 
updatelisting('sys_packageBuilderEvent','startDate="'.date('Y-m-d', strtotime($i->format("Y-m-d"))).'",endDate="'.date('Y-m-d', strtotime($i->format("Y-m-d").' + '.$eventData['days'].' days')).'"','id="'.$eventData['id'].'"'); 

?>

<li class="ui-state-default">
<span class="ui-icon ui-icon-arrowthick-2-n-s"></span>
<button class="jss11243 jss11244 editButton" <?php if($result['quoteStatus']!=1 && $result['confirmQuote']!=1 || $_SESSION['userid']==1 || strpos($LoginUserDetails["permissionView"], 'PackagePermission') !== false){ ?> onclick="loadpop('<?php if($eventData['sectionType']=='FeesInsurance'){ echo 'Fees - Insurance'; } else {  echo $eventData['sectionType'];  }?> From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=add<?php echo $eventData['sectionType']; ?>&toatlPax=<?php echo $totalPax; ?>&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&id=<?php echo encode($eventData['id']); ?>" <?php } ?> >
<div class="jss11047 jss11245" data-test="itemcircle_circle"><i class="fa <?php if($eventData['sectionType']=='Accommodation'){ ?>fa-bed<?php } ?><?php if($eventData['sectionType']=='Activity'){ ?>fa-blind<?php } ?><?php if($eventData['sectionType']=='Transportation'){ ?>fa-car<?php } ?><?php if($eventData['sectionType']=='FeesInsurance'){ ?>fa-credit-card<?php } ?><?php if($eventData['sectionType']=='Meal'){ ?>fa-cutlery<?php } ?><?php if($eventData['sectionType']=='Flight'){ ?>fa-plane<?php } ?><?php if($eventData['sectionType']=='Leisure'){ ?>fa-umbrella<?php } ?><?php if($eventData['sectionType']=='Gap'){ ?>fa-home<?php } ?><?php if($eventData['sectionType']=='Visa'){ ?>fa-cc-visa<?php } ?><?php if($eventData['sectionType']=='Cruise'){ ?>fa-ship<?php } ?>" aria-hidden="true"></i>
<?php if($eventData['checkIn']!='' && $eventData['sectionType']!='Leisure'){ ?>
 <span class="stime"><?php echo date('g:i A',strtotime($eventData['checkIn'])); ?> <?php } ?>
</div>

<div class="jss13080"><?php echo stripslashes($eventData['name']); ?></div>

<?php if($eventData['sectionType']=='Accommodation'){ ?><div class="strrating"><?php echo starcategory($eventData['hotelCategory']); ?></div><?php } ?>
</button>

<input name="sr[]" type="hidden" value="<?php echo $eventData['id']; ?>" />
<input name="action" type="hidden" value="eventsorting" />
</li>

<?php } ?> </ul>
</div>

 
<div class="jss11195 addeventbtn" style="position:relative; margin-left: 12px;">

<div class="jss11047 jss11234 jss11053" style="cursor:pointer;"><span class="jss11237"><i class="fa fa-plus" aria-hidden="true" style="font-size: 28px; margin-top: 6px; "></i></span> 
   

<div class="show">
<button type="button" class="optionmenu" data-toggle="dropdown" aria-expanded="true"></button>
<div class="dropdown-menu show" >
 
<a href="#" class="dropdown-item" onclick="loadpop('Accommodation From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addAccommodation&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>" ><span style="width:30px; display: inline-block; text-align:center;"  ><i class="fa fa-bed" aria-hidden="true"></i></span> &nbsp;Accommodation</a>


<a href="#" class="dropdown-item" onclick="loadpop('Activity From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addActivity&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>" ><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-blind" aria-hidden="true"></i></span> &nbsp;Activity</a>


<a href="#" class="dropdown-item" onclick="loadpop('Transportation From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addTransportation&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>" ><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-car" aria-hidden="true"></i></span> &nbsp;Transportation</a>


<a href="#" class="dropdown-item"  onclick="loadpop('Insurance / Visa From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addFeesInsurance&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>"><span style="width:30px; display: inline-block; text-align:center;" ><i class="fa fa-credit-card" aria-hidden="true"></i></span> &nbsp;Insurance / Visa </a>

<a href="#" class="dropdown-item" onclick="loadpop('Meal From <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addMeal&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>"><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-cutlery" aria-hidden="true"></i></span> &nbsp;Meal</a>
 
<a href="#" class="dropdown-item" onclick="loadpop('Flight - <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addFlight&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>"><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-plane" aria-hidden="true"></i></span> &nbsp;Flight</a>
 
<a href="#" class="dropdown-item" onclick="loadpop('Leisure - <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addLeisure&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>"><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-umbrella" aria-hidden="true"></i></span> &nbsp;Leisure</a>

<a href="#" class="dropdown-item" onclick="loadpop('Cruise - <?php echo date('d-m-Y', strtotime($i->format("Y-m-d"))); ?>',this,'600px')" data-toggle="modal" data-target=".bs-example-modal-center" popaction="action=addCruise&pid=<?php echo $_REQUEST['id']; ?>&d=<?php echo date('Y-m-d', strtotime($i->format("Y-m-d"))); ?>&packageDays=<?php echo $n; ?>"><span style="width:30px; display: inline-block; text-align:center;"><i class="fa fa-ship" aria-hidden="true"></i></span> &nbsp;Cruise</a>
 
</div>
</div>
 
</div>

 
</div>
 

</div>


</div>
 
 </form>
 
 

 <script>
  $( function() {
    $( "#sortable<?php echo $n; ?>" ).sortable({
    stop: function(){
        submitformlist<?php echo $n; ?>();      
    }
});
    $( "#sortable<?php echo $n; ?>" ).disableSelection();
	
	
  } );
  
  
function submitformlist<?php echo $n; ?>(){ 
$('#actoinfrm<?php echo $n; ?>').submit();  
 
}  
  </script>
 
<?php $n++; } ?>


</div>
</div>

</div>
</div>
</div>
</div>


 

<script>
$(document).ready(function() {
  $('.optionmenu').trigger("click");
}); 
</script>

